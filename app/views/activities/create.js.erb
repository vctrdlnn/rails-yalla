c// Here you will write *javascript* that would be executed by the browser
console.log('this is create.js')
<% if @activity.errors.any? %>
  // Render new review form with errors
console.log('error')
  $('#new_activity').html("<%= j render 'activities/form_new_establishment_from_trip', activity: @activity, trip: @trip %>");
<% else %>
  // Create a paragraph for the new review. But hide it.
  var new_activity = $("<%= j render 'activities/card_activity_index', activity: @activity %>").hide();
  console.log(new_activity)
  // Add it to the DOM, at the end of the existing reviews. It's still hidden.
  $('#grid-0').prepend(new_activity);
  new_activity.accordion({
    header: "> div.activity-item-header",
    collapsible: true,
    heightStyle: "content",
    active: false
  })
  // Show the new review with an animation!
  new_activity.slideDown();
  // Reset the form
  <% @activity = Activity.new %>
  $('#activity_est_establishment').val('');
  $('#activity_est_title').val('');
  $('#activity_address').val('');
  $('#activity_cat_title').val('');
  $('#activity_est_description').val('');
  $('#activity_est_url').val('');
  $('#activity_est_lat').val('');
  $('#activity_est_lon').val('');

  $('#autoRefresh').click();
<% end %>
